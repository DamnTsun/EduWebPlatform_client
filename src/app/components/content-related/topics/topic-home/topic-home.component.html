<section class="container page-content">

  <!-- Whilst fetching topic from api -->
  <ng-container *ngIf="(this.topic$ !== null); else loadingTemplate">
    <h2>
      {{ topic$.name }}
    </h2>
    <div class="page-sub-content">
      <p>{{ topic$.description }}</p>
    </div>



    <!-- List lessons / tests in topic. -->
    <section *ngIf="(this.lessons$ !== null || this.tests$ !== null)">
      <div class="row">
        <!-- Lessons -->
        <div class="col" *ngIf="(this.lessons$ !== null)">
          <h2>Select a Lesson:</h2>
          <ul class="content-list">
            <!-- Create lesson button -->
            <button class="btn btn-primary" *ngIf="this.isAdmin" routerLink="lessons/create">Create a Lesson</button>

            <!-- Show each lesson as an item on a list. -->
            <li *ngFor="let lesson of lessons$; let i = index">
              <div class="card">
                <div class="card-body">
                  <h5>{{ lesson.name }}</h5>
                  <button class="btn btn-primary enterContentButton" routerLink="lessons/{{ lesson.id }}">View Lesson</button>

                  <button class="btn btn-danger adminButton" *ngIf="this.isAdmin" (click)="this.deleteLesson(i)">Delete</button>
                  <button class="btn btn-warning adminButton" *ngIf="this.isAdmin" routerLink="lessons/{{ lesson.id }}/edit">Edit</button>
                </div>
              </div>
            </li>

          </ul>
        </div>



        <!-- Tests -->
        <div class="col" *ngIf="(this.tests$ !== null)">
          <h2>Select a Test:</h2>
          <ul class="content-list">
            <!-- Show each test as an item on a list. -->
            <li *ngFor="let test of tests$; let i = index">
              <div class="card">
                <div class="card-body">
                  <h5>{{ test.name }}</h5>
                  <button class="btn btn-primary enterContentButton" routerLink="tests/{{ test.id }}">View Test</button>

                  <button class="btn btn-danger adminButton" *ngIf="this.isAdmin" (click)="this.deleteTest(i)">Delete</button>
                  <button class="btn btn-warning adminButton" *ngIf="this.isAdmin">Edit</button>
                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
    </section>
  </ng-container>



  <!-- While fetching topic OR fetching failed -->
  <ng-template #loadingTemplate>
    <!-- Loading -->
    <ng-container *ngIf="!loadingError; else loadingErrorTemplate">
      <app-loader></app-loader>
    </ng-container>
    <!-- Failed-->
    <ng-template #loadingErrorTemplate>
      Loading failed
    </ng-template>

  </ng-template>

</section>